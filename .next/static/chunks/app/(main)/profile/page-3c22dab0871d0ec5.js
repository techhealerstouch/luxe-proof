(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1897],{17514:(e,s,a)=>{Promise.resolve().then(a.bind(a,32801))},32801:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var l=a(95155),r=a(12115),t=a(94861),n=a(35695),i=a(82695),d=a(97168),o=a(88482),c=a(89852),u=a(82714),m=a(49026),p=a(34964),x=a(95784),h=a(40646),f=a(54861),w=a(19946);let g=(0,w.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var b=a(92657),v=a(71007);let j=(0,w.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var y=a(70927);let N=[{value:"UTC",label:"GMT+0 (UTC)"},{value:"Pacific/Midway",label:"GMT-11 (Midway Island)"},{value:"Pacific/Honolulu",label:"GMT-10 (Hawaii)"},{value:"America/Anchorage",label:"GMT-9 (Alaska)"},{value:"America/Los_Angeles",label:"GMT-8 (Pacific Time)"},{value:"America/Denver",label:"GMT-7 (Mountain Time)"},{value:"America/Chicago",label:"GMT-6 (Central Time)"},{value:"America/New_York",label:"GMT-5 (Eastern Time)"},{value:"America/Caracas",label:"GMT-4 (Venezuela)"},{value:"America/Sao_Paulo",label:"GMT-3 (Brazil)"},{value:"Atlantic/South_Georgia",label:"GMT-2 (South Georgia)"},{value:"Atlantic/Azores",label:"GMT-1 (Azores)"},{value:"Europe/London",label:"GMT+0 (London)"},{value:"Europe/Paris",label:"GMT+1 (Central European Time)"},{value:"Europe/Athens",label:"GMT+2 (Eastern European Time)"},{value:"Europe/Moscow",label:"GMT+3 (Moscow)"},{value:"Asia/Dubai",label:"GMT+4 (Dubai)"},{value:"Asia/Karachi",label:"GMT+5 (Pakistan)"},{value:"Asia/Kolkata",label:"GMT+5:30 (India)"},{value:"Asia/Dhaka",label:"GMT+6 (Bangladesh)"},{value:"Asia/Bangkok",label:"GMT+7 (Thailand)"},{value:"Asia/Shanghai",label:"GMT+8 (China/Philippines)"},{value:"Asia/Tokyo",label:"GMT+9 (Japan)"},{value:"Australia/Sydney",label:"GMT+10 (Australia East)"},{value:"Pacific/Noumea",label:"GMT+11 (New Caledonia)"},{value:"Pacific/Auckland",label:"GMT+12 (New Zealand)"}],P=y.Ik({name:y.Yj().min(1,"Full name is required"),email:y.Yj().email("Invalid email address"),phone_number:y.Yj().optional(),timezone:y.Yj().min(1,"Timezone is required"),businessName:y.Yj().min(1,"Account name is required"),businessSlug:y.Yj().optional()}),T=y.Ik({currentPassword:y.Yj().min(1,"Current password is required"),newPassword:y.Yj().min(8,"New password must be at least 8 characters"),confirmPassword:y.Yj().min(1,"Please confirm your new password")}).refine(e=>e.newPassword===e.confirmPassword,{message:"New passwords do not match",path:["confirmPassword"]}),A=e=>{let{message:s}=e;return s?(0,l.jsx)(m.Fc,{className:"mb-4 ".concat("error"===s.type?"border-red-500":"border-green-500"),children:(0,l.jsxs)(m.TN,{className:"flex items-center gap-2",children:["success"===s.type?(0,l.jsx)(h.A,{className:"h-4 w-4 text-green-500"}):(0,l.jsx)(f.A,{className:"h-4 w-4 text-red-500"}),s.text]})}):null},C=e=>{let{id:s,value:a,onChange:r,show:t,onToggle:n,label:i}=e;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:s,children:i}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(c.p,{id:s,type:t?"text":"password",className:"rounded-xl pr-10",value:a,onChange:e=>r(e.target.value)}),(0,l.jsx)("button",{type:"button",onClick:n,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",children:t?(0,l.jsx)(g,{size:18}):(0,l.jsx)(b.A,{size:18})})]})]})};function k(){let{user:e,updateUser:s,changePassword:a}=(0,t.A)(),m=(0,n.useRouter)(),[h,f]=(0,r.useState)({name:"",phone_number:"",timezone:"",businessName:"",businessSlug:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),[w,g]=(0,r.useState)({profile:null,password:null}),[b,y]=(0,r.useState)(!1),[k,M]=(0,r.useState)(!1),[z,G]=(0,r.useState)({current:!1,new:!1,confirm:!1});(0,r.useEffect)(()=>{if(!e){m.push("/login");return}f(s=>{var a,l;return{...s,name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",phone_number:(null==e?void 0:e.phone_number)||"",timezone:(null==e?void 0:e.timezone)||"",businessName:(null==e?void 0:null===(a=e.account)||void 0===a?void 0:a.name)||"",businessSlug:(null==e?void 0:null===(l=e.account)||void 0===l?void 0:l.slug)||""}}),M(!0),console.log("User timezone:",null==e?void 0:e.timezone)},[e,m]),(0,r.useEffect)(()=>{console.log("formData.timezone updated to:",h.timezone)},[h.timezone]);let S=(0,r.useMemo)(()=>[{text:"Minimum 8 characters",met:h.newPassword.length>=8},{text:"Passwords must match",met:h.newPassword&&h.confirmPassword&&h.newPassword===h.confirmPassword}],[h.newPassword,h.confirmPassword]),_=(0,r.useCallback)((e,s)=>{console.log("Updating ".concat(e," to:"),s),f(a=>({...a,[e]:s}))},[]),R=(0,r.useCallback)(e=>{G(s=>({...s,[e]:!s[e]}))},[]),E=(0,r.useCallback)((e,s)=>{g(a=>({...a,[e]:s}))},[]),U=async e=>{e.preventDefault(),E("profile",null);let a=P.safeParse(h);if(!a.success){E("profile",{type:"error",text:a.error.errors[0].message});return}y(!0);try{await s({name:h.name,email:h.email,phone_number:h.phone_number,timezone:h.timezone,businessName:h.businessName,businessSlug:h.businessSlug}),E("profile",{type:"success",text:"Profile updated successfully!"})}catch(e){E("profile",{type:"error",text:e.message||"Failed to update profile"})}finally{y(!1)}},F=async e=>{e.preventDefault(),E("password",null);let s=T.safeParse({currentPassword:h.currentPassword,newPassword:h.newPassword,confirmPassword:h.confirmPassword});if(!s.success){E("password",{type:"error",text:s.error.errors[0].message});return}y(!0);try{await a(h.currentPassword,h.newPassword,h.confirmPassword),E("password",{type:"success",text:"Password updated successfully!"}),f(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""})),G({current:!1,new:!1,confirm:!1})}catch(e){var l,r;E("password",{type:"error",text:(null===(r=e.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.message)||e.message||"Failed to update password"})}finally{y(!1)}};return e?(0,l.jsx)(i.A,{children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Profile"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"manage your profile and account security"})]}),(0,l.jsxs)(p.tU,{defaultValue:"profile",className:"space-y-6",children:[(0,l.jsxs)(p.j7,{className:"grid w-full grid-cols-2",children:[(0,l.jsxs)(p.Xi,{value:"profile",className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{className:"h-4 w-4"}),"Profile"]}),(0,l.jsxs)(p.Xi,{value:"password",className:"flex items-center gap-2",children:[(0,l.jsx)(j,{className:"h-4 w-4"}),"Password"]})]}),(0,l.jsx)(p.av,{value:"profile",className:"space-y-6",children:(0,l.jsxs)(o.Zp,{children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(o.ZB,{children:"Profile Information"}),(0,l.jsx)(o.BT,{children:"Update your personal and business information"})]}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsx)(A,{message:w.profile}),(0,l.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:"name",children:"Full Name"}),(0,l.jsx)(c.p,{id:"name",type:"text",className:"rounded-xl",value:h.name,onChange:e=>_("name",e.target.value)})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:"email",children:"Email Address"}),(0,l.jsx)(c.p,{id:"email",type:"email",className:"rounded-xl",disabled:!0,value:h.email})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:"phone_number",children:"Phone Number (Optional)"}),(0,l.jsx)(c.p,{id:"phone_number",type:"tel",className:"rounded-xl",value:h.phone_number,onChange:e=>_("phone_number",e.target.value),placeholder:"Your phone number"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:"timezone",children:"Timezone"}),k?(0,l.jsxs)(x.l6,{value:h.timezone,onValueChange:e=>{console.log("Select onValueChange called with:",e),e&&e!==h.timezone&&_("timezone",e)},children:[(0,l.jsx)(x.bq,{className:"rounded-xl",children:(0,l.jsx)(x.yv,{placeholder:"Select your timezone"})}),(0,l.jsx)(x.gC,{children:N.map(e=>(0,l.jsx)(x.eb,{value:e.value,children:e.label},e.value))})]}):(0,l.jsx)("div",{className:"h-10 rounded-xl border border-input bg-background px-3 py-2 text-sm text-muted-foreground flex items-center",children:"Loading timezone..."})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:"businessName",children:"Account Name"}),(0,l.jsx)(c.p,{id:"businessName",type:"text",className:"rounded-xl",value:h.businessName,onChange:e=>_("businessName",e.target.value),placeholder:"Your account name"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{htmlFor:"businessSlug",children:"Business Slug"}),(0,l.jsx)(c.p,{id:"businessSlug",type:"text",className:"rounded-xl",value:h.businessSlug,onChange:e=>_("businessSlug",e.target.value),placeholder:"Your business slug"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.J,{className:"text-sm font-medium text-muted-foreground",children:"Role"}),(0,l.jsx)("p",{className:"text-sm capitalize bg-muted px-3 py-2 rounded-xl",children:e.role})]}),(0,l.jsx)(d.$,{type:"submit",disabled:b,className:"rounded-xl w-full md:w-auto",children:b?"Updating...":"Update Profile"})]})]})]})}),(0,l.jsx)(p.av,{value:"password",className:"space-y-6",children:(0,l.jsxs)(o.Zp,{children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(o.ZB,{children:"Change Password"}),(0,l.jsx)(o.BT,{children:"Update your password to keep your account secure"})]}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsx)(A,{message:w.password}),(0,l.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,l.jsx)(C,{id:"currentPassword",label:"Current Password",value:h.currentPassword,onChange:e=>_("currentPassword",e),show:z.current,onToggle:()=>R("current")}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(C,{id:"newPassword",label:"New Password",value:h.newPassword,onChange:e=>_("newPassword",e),show:z.new,onToggle:()=>R("new")}),(0,l.jsx)(C,{id:"confirmPassword",label:"Confirm New Password",value:h.confirmPassword,onChange:e=>_("confirmPassword",e),show:z.confirm,onToggle:()=>R("confirm")})]}),(0,l.jsxs)("div",{className:"bg-muted/50 p-4 rounded-xl",children:[(0,l.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Password Requirements:"}),(0,l.jsx)("ul",{className:"text-sm text-muted-foreground space-y-1",children:S.map((e,s)=>(0,l.jsxs)("li",{className:e.met?"text-green-500":"",children:["• ",e.text]},s))})]}),(0,l.jsx)(d.$,{type:"submit",disabled:b,className:"rounded-xl w-full md:w-auto",children:b?"Updating...":"Change Password"})]})]})]})})]})]})}):null}},54861:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},71007:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},88482:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var l=a(95155),r=a(12115),t=a(53999);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,t.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,t.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},92657:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},95784:(e,s,a)=>{"use strict";a.d(s,{bq:()=>m,eb:()=>f,gC:()=>h,l6:()=>c,mi:()=>w,yv:()=>u});var l=a(95155),r=a(12115),t=a(22918),n=a(66474),i=a(47863),d=a(5196),o=a(53999);let c=t.bL;t.YJ;let u=t.WT,m=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,l.jsxs)(t.l9,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,l.jsx)(t.In,{asChild:!0,children:(0,l.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=t.l9.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.PP,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=t.PP.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.wn,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=t.wn.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,l.jsx)(t.ZL,{children:(0,l.jsxs)(t.UC,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,l.jsx)(p,{}),(0,l.jsx)(t.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,l.jsx)(x,{})]})})});h.displayName=t.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.JU,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=t.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,l.jsxs)(t.q7,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(t.VF,{children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})}),(0,l.jsx)(t.p4,{children:r})]})});f.displayName=t.q7.displayName;let w=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});w.displayName=t.wv.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[794,6803,6671,6356,6766,2630,2918,927,2695,8441,1684,7358],()=>s(17514)),_N_E=e.O()}]);