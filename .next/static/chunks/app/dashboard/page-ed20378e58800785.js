(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1154:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1243:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2657:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3021:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var a=s(5155),r=s(2115),i=s(4861),n=s(5695),c=s(3301),l=s(8006),d=s(8482),o=s(8524),h=s(7168),m=s(8145),x=s(9840),u=s(9026),j=s(1586),p=s(9946);let g=(0,p.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),f=(0,p.A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),N=(0,p.A)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var b=s(3550),v=s(1154),y=s(3904),w=s(4616),A=s(1243);let k=(0,p.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),C=(0,p.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var E=s(9037),_=s(646),S=s(2657),T=s(4186),M=s(5339),R=s(6874),B=s.n(R),L=s(8181);let P=[{id:"cards",name:"Credit/Debit Card",type:"CREDIT_CARD",icon:j.A,description:"Visa, Mastercard, JCB, AMEX",enabled:!0},{id:"ewallet",name:"E-Wallet",type:"EWALLET",icon:g,description:"GCash, PayMaya, GrabPay",enabled:!0},{id:"bank_transfer",name:"Bank Transfer",type:"BANK_TRANSFER",icon:f,description:"Online Banking, ATM",enabled:!0},{id:"qr_code",name:"QR Code",type:"QR_CODE",icon:N,description:"Scan to pay",enabled:!0}];function F(){var e,t;let{user:s,isLoading:p}=(0,i.A)(),g=(0,n.useRouter)(),[f,N]=(0,r.useState)(null),[R,F]=(0,r.useState)([]),[W,D]=(0,r.useState)([]),[Z,z]=(0,r.useState)(!0),[$,H]=(0,r.useState)(null),[I,U]=(0,r.useState)(0),[q,V]=(0,r.useState)(!1),[O,Y]=(0,r.useState)(null),[G,Q]=(0,r.useState)(!1),[X,J]=(0,r.useState)(!1),[K,ee]=(0,r.useState)(null),[et,es]=(0,r.useState)(null),[ea,er]=(0,r.useState)(!1),[ei,en]=(0,r.useState)(null),[ec,el]=(0,r.useState)(!1),ed=L.jk.getInstance(),eo=(e,t)=>{if(t){let s=e*(1-t/100);return{original:e,discounted:s,savings:e-s}}return{original:e}},eh=async()=>{try{V(!0),Y(null);let e=await (0,L.tD)();U(e)}catch(e){Y(e instanceof Error?e.message:"Failed to load credits"),console.error("Error loading credits:",e)}finally{V(!1)}},em=e=>{ee(e),en(null)},ex=e=>{es(e),en(null)},eu=async()=>{if(!K||!et||!(null==s?void 0:s.id)){en("Please select a package and payment method");return}let e=L.Eg.find(e=>e.id===K);if(!e){en("Invalid package selected");return}er(!0),en(null);try{await ed.topUp(s.id,e),setTimeout(async()=>{try{let e=await ed.refreshCredits();U(e),el(!0),setTimeout(()=>{ej()},2e3)}catch(e){en("Payment completed but failed to refresh credits. Please refresh the page.")}finally{er(!1)}},2e3)}catch(e){en(e instanceof Error?e.message:"Payment processing failed"),er(!1)}},ej=()=>{ea||(J(!1),ep())},ep=()=>{ee(null),es(null),en(null),el(!1),er(!1)},eg=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/864e5),r=Math.floor(s/36e5),i=Math.floor(s/6e4);return a>0?"".concat(a," day").concat(a>1?"s":""," ago"):r>0?"".concat(r," hour").concat(r>1?"s":""," ago"):i>0?"".concat(i," minute").concat(i>1?"s":""," ago"):"Just now"},ef=e=>{let t=e.status,s=e.document_sent_at;return"voided"===t?(0,a.jsx)(m.E,{className:"bg-red-100 text-red-800 border-red-200",children:"Voided"}):s||"sent"===t?(0,a.jsx)(m.E,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Document Sent"}):"submitted"===t?(0,a.jsx)(m.E,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Submitted"}):(0,a.jsx)(m.E,{className:"bg-green-100 text-green-800 border-green-200",children:"Completed"})},eN=e=>{if(!e)return(0,a.jsx)(m.E,{className:"bg-gray-500 hover:bg-gray-600 text-white",children:"Not Available"});let t=e.toLowerCase().includes("authentic")||e.toLowerCase().includes("genuine");return(0,a.jsx)(m.E,{className:t?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white",children:e})},eb=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{H(null),e&&z(!0);let t=localStorage.getItem("accessToken");if(!t){H("No authentication token available");return}let s="http://localhost:8000",a={Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"};await eh();try{let e=await fetch("".concat(s,"/api/dashboard/stats"),{headers:a});if(e.ok){let t=await e.json();N({totalAuthentications:Number(t.totalAuthentications)||0,pendingAuthentications:Number(t.pendingAuthentications)||0,completedAuthentications:Number(t.completedAuthentications)||0,rejectedAuthentications:Number(t.rejectedAuthentications)||0,totalRevenue:Number(t.totalRevenue)||0,thisMonthRevenue:Number(t.thisMonthRevenue)||0,lastMonthRevenue:Number(t.lastMonthRevenue)||0,totalClients:Number(t.totalClients)||0,creditsUsed:Number(t.creditsUsed)||0,creditsRemaining:I})}}catch(e){console.error("Error fetching stats:",e)}try{let e=await fetch("".concat(s,"/api/auth-products"),{headers:a});if(e.ok){let t=await e.json(),s=Array.isArray(t.data)?t.data.sort((e,t)=>{let s=new Date(e.created_at||0).getTime();return new Date(t.created_at||0).getTime()-s}).slice(0,5).map(e=>({id:e.id,name:e.client_name||e.name||"Unknown Client",client_name:e.client_name,brand:e.brand,model:e.model,serial_number:e.serial_info.serial_number,estimated_production_year:e.estimated_production_year,authenticity_verdict:e.authenticity_verdict,status:e.status||"completed",document_sent_at:e.document_sent_at,created_at:e.created_at})):[];F(s)}}catch(e){console.error("Error fetching recent authentications:",e)}try{let e=await fetch("".concat(s,"/api/dashboard/top-brands"),{headers:a});if(e.ok){let t=await e.json();D(Array.isArray(t.data||t)?(t.data||t).slice(0,5):[])}}catch(e){console.error("Error fetching top brands:",e)}}catch(e){console.error("Error fetching dashboard data:",e),H("Failed to load dashboard data")}finally{e&&z(!1)}};(0,r.useEffect)(()=>ed.subscribe(e=>{U(e)}),[ed]),(0,r.useEffect)(()=>{s&&eb()},[s]),(0,r.useEffect)(()=>{Q(!0)},[]);let ev=0===(t=I)?{status:"empty",message:"No credits remaining",color:"text-red-600",bgColor:"bg-red-50 border-red-200"}:t<1e3?{status:"low",message:"Low credits - insufficient for authentication",color:"text-orange-600",bgColor:"bg-orange-50 border-orange-200"}:t<5e3?{status:"moderate",message:"Moderate credit balance",color:"text-yellow-600",bgColor:"bg-yellow-50 border-yellow-200"}:{status:"good",message:"Good credit balance",color:"text-green-600",bgColor:"bg-green-50 border-green-200"},ey=(0,L.W9)(I);return p||!s?(0,a.jsx)(l.n,{}):Z?(0,a.jsx)(c.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(v.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})})}):(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Welcome back, ",s.name,"! Here's your overview."]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>eb(),disabled:Z||q,children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2 ".concat(Z||q?"animate-spin":"")}),"Refresh"]}),(0,a.jsx)(h.$,{asChild:!0,disabled:I<1e3||q,className:I<1e3||q?"opacity-50 cursor-not-allowed":"",children:(0,a.jsxs)(B(),{href:"/authentications/intro",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"New Authentication"]})})]})]}),$&&(0,a.jsx)(d.Zp,{className:"border-destructive bg-destructive/5",children:(0,a.jsx)(d.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-destructive"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-destructive mb-1",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-destructive/80",children:$})]})]}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>eb(),className:"border-destructive text-destructive hover:bg-destructive/10",children:"Try Again"})]})})}),O&&(0,a.jsx)(d.Zp,{className:"border-orange-500 bg-orange-50",children:(0,a.jsx)(d.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-orange-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-orange-600 mb-1",children:"Credits Error"}),(0,a.jsx)("p",{className:"text-sm text-orange-600/80",children:O})]})]}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:eh,className:"border-orange-500 text-orange-600 hover:bg-orange-50",children:"Retry"})]})})}),G&&!q&&("empty"===ev.status||"low"===ev.status)&&(0,a.jsx)(d.Zp,{className:"border ".concat(ev.bgColor),children:(0,a.jsx)(d.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 ".concat(ev.color)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold ".concat(ev.color," mb-1"),children:"empty"===ev.status?"No Credits":"Low Credits"}),(0,a.jsxs)("p",{className:"text-sm ".concat(ev.color,"/80"),children:[ev.message,". You need 1000 credits to perform an authentication."]})]})]}),(0,a.jsxs)(h.$,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>J(!0),children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Top Up Credits"]})]})})}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Authentications"}),(0,a.jsx)(k,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==f?void 0:null===(e=f.totalAuthentications)||void 0===e?void 0:e.toLocaleString())||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Lifetime authentications"})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d.ZB,{className:"text-sm font-medium",children:"Total Clients"}),(0,a.jsx)(C,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.totalClients)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active customers"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),"Credit Overview"]}),(0,a.jsx)(d.BT,{children:"Your current credit status"})]}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Current Balance"}),q?(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):O?(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Failed to load"})]}):(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 text-blue-600"}),I.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[ey," authentication",1!==ey?"s":""," available"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:eh,disabled:q,children:[(0,a.jsx)(y.A,{className:"w-3 h-3 mr-1 ".concat(q?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(h.$,{size:"sm",onClick:()=>J(!0),className:"w-full",children:[(0,a.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"Top Up"]})]})]})]}),!q&&!O&&(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(ev.bgColor),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["good"===ev.status?(0,a.jsx)(_.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(A.A,{className:"h-4 w-4 ".concat(ev.color)}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(ev.color),children:ev.message})]})})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Quick Actions"}),(0,a.jsx)(d.BT,{children:"Common tasks"})]}),(0,a.jsxs)(d.Wu,{className:"space-y-3",children:[(0,a.jsx)(h.$,{asChild:!0,className:"w-full justify-start ".concat(I<1e3||q?"opacity-50":""),disabled:I<1e3||q,children:(0,a.jsxs)(B(),{href:"/authentications/intro",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Start Authentication"," ",I<1e3?"(Insufficient Credits)":q?"(Loading...)":""]})}),(0,a.jsx)(h.$,{variant:"outline",asChild:!0,className:"w-full justify-start",children:(0,a.jsxs)(B(),{href:"/authentications",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"View All Cases"]})})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,a.jsxs)(d.Zp,{className:"lg:col-span-2",children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.ZB,{children:"Recent Authentications"}),(0,a.jsx)(d.BT,{children:"Latest authentication requests"})]}),R.length>0&&(0,a.jsxs)(m.E,{variant:"secondary",className:"bg-primary/10 text-primary",children:[R.length," recent"]})]})}),(0,a.jsxs)(d.Wu,{children:[R.length>0?(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(o.XI,{children:[(0,a.jsx)(o.A0,{children:(0,a.jsxs)(o.Hj,{children:[(0,a.jsx)(o.nd,{className:"w-[120px]",children:"Serial Number"}),(0,a.jsx)(o.nd,{children:"Client"}),(0,a.jsx)(o.nd,{children:"Brand"}),(0,a.jsx)(o.nd,{children:"Model"}),(0,a.jsx)(o.nd,{className:"w-[100px]",children:"Year"}),(0,a.jsx)(o.nd,{children:"Authenticity"}),(0,a.jsx)(o.nd,{children:"Status"}),(0,a.jsx)(o.nd,{className:"w-[120px]",children:"Created"})]})}),(0,a.jsx)(o.BF,{children:R.map(e=>{let t="voided"===e.status;return(0,a.jsxs)(o.Hj,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>g.push("/authentications/".concat(e.id)),children:[(0,a.jsx)(o.nA,{children:(0,a.jsx)("div",{className:"font-mono text-sm ".concat(t?"text-gray-400 line-through":""),children:e.serial_number||"N/A"})}),(0,a.jsx)(o.nA,{children:(0,a.jsx)("div",{className:"font-medium ".concat(t?"text-gray-400 line-through":""),children:e.name||e.client_name||"Unknown"})}),(0,a.jsx)(o.nA,{children:(0,a.jsx)("div",{className:"text-sm ".concat(t?"text-gray-400 line-through":""),children:e.brand})}),(0,a.jsx)(o.nA,{children:(0,a.jsx)("div",{className:"text-sm ".concat(t?"text-gray-400 line-through":""),children:e.model||"N/A"})}),(0,a.jsx)(o.nA,{children:(0,a.jsx)("div",{className:"text-sm ".concat(t?"text-gray-400 line-through":""),children:e.estimated_production_year||"N/A"})}),(0,a.jsx)(o.nA,{children:t?(0,a.jsx)(m.E,{className:"bg-gray-100 text-gray-500 border-gray-200",children:"Voided"}):eN(e.authenticity_verdict)}),(0,a.jsx)(o.nA,{children:ef(e)}),(0,a.jsx)(o.nA,{children:(0,a.jsx)("div",{className:"text-sm ".concat(t?"text-gray-400":""),children:e.created_at?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(T.A,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{children:eg(e.created_at)})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.created_at).toLocaleDateString()})]}):"N/A"})})]},e.id)})})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(k,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"No recent authentications"}),(0,a.jsx)(h.$,{asChild:!0,size:"sm",disabled:I<1e3||q,className:I<1e3||q?"opacity-50":"",children:(0,a.jsxs)(B(),{href:"/authentications/intro",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),I<1e3?"Need Credits":q?"Loading...":"Start First Authentication"]})})]}),R.length>0&&(0,a.jsx)("div",{className:"flex justify-center mt-4 pt-4 border-t",children:(0,a.jsx)(h.$,{variant:"outline",asChild:!0,children:(0,a.jsx)(B(),{href:"/authentications",children:"View All Authentications"})})})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Top Brands"}),(0,a.jsx)(d.BT,{children:"Most authenticated brands"})]}),(0,a.jsx)(d.Wu,{children:W.length>0?(0,a.jsx)("div",{className:"space-y-3",children:W.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary/10 text-primary text-xs font-bold",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.brand}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.count," authentication",1!==e.count?"s":""]})]})]})},e.brand))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(E.A,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No brand data available"})]})})]})]}),(0,a.jsx)(x.lG,{open:X,onOpenChange:J,children:(0,a.jsxs)(x.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsxs)(x.L3,{className:"flex items-center gap-2",children:[ec?(0,a.jsx)(_.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(j.A,{className:"h-5 w-5"}),ec?"Payment Successful!":"Top Up Credits"]}),(0,a.jsx)(x.rr,{children:ec?"Your new credit balance is ".concat(I.toLocaleString()," credits."):(0,a.jsxs)(a.Fragment,{children:["Choose a credit package and payment method. Current balance:"," ",(0,a.jsxs)("strong",{children:[I.toLocaleString()," credits"]})," (",(0,L.W9)(I)," authentication",1!==(0,L.W9)(I)?"s":"",")"]})})]}),ec&&(0,a.jsxs)(u.Fc,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(u.TN,{className:"text-green-800",children:"Payment completed successfully! Your credits have been added."})]}),ei&&(0,a.jsxs)(u.Fc,{variant:"destructive",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),(0,a.jsx)(u.TN,{children:ei})]}),!ec&&(0,a.jsxs)("div",{className:"space-y-6 py-4 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Select Package"}),(0,a.jsx)("div",{className:"grid gap-3",children:L.Eg.map(e=>{let t=eo(e.price,e.discount),s=K===e.id;return(0,a.jsxs)("div",{className:"relative flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-all duration-200 ".concat(s?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:shadow-sm"," ").concat(e.popular&&!s?"border-blue-200 bg-blue-25":""),onClick:()=>em(e.id),children:[e.popular&&(0,a.jsx)(m.E,{className:"absolute -top-2 right-2 text-xs bg-blue-500",children:"Popular"}),e.discount&&(0,a.jsxs)(m.E,{variant:"secondary",className:"absolute -top-2 left-2 text-xs",children:[e.discount,"% OFF"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(b.A,{className:"h-3 w-3"}),e.credits.toLocaleString()," credits"]}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 font-medium",children:[(0,L.W9)(e.credits)," authentication",1!==(0,L.W9)(e.credits)?"s":""]})]}),e.discount&&t.savings&&(0,a.jsxs)("p",{className:"text-xs text-green-600 font-medium",children:["Save ",(0,L.vv)(t.savings)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t.discounted&&(0,a.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,L.vv)(t.original)}),(0,a.jsx)("div",{className:"font-semibold text-lg",children:(0,L.vv)(t.discounted||t.original)})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,L.vv)((t.discounted||t.original)/e.credits),"/credit"]})]})]},e.id)})})]}),K&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Select Payment Method"}),(0,a.jsx)("div",{className:"grid gap-2",children:P.filter(e=>e.enabled).map(e=>{let t=e.icon,s=et===e.id;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all duration-200 ".concat(s?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300"),onClick:()=>ex(e.id),children:[(0,a.jsx)(t,{className:"h-5 w-5 text-gray-600"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id)})})]})]}),(0,a.jsx)(x.Es,{children:ec?(0,a.jsx)(h.$,{onClick:ej,className:"w-full",children:"Close"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.$,{variant:"outline",onClick:ej,disabled:ea,children:"Cancel"}),(0,a.jsx)(h.$,{disabled:!K||!et||ea,onClick:eu,children:ea?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Processing..."]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Complete Payment"]})})]})})]})})]})})}},4186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6533:(e,t,s)=>{Promise.resolve().then(s.bind(s,3021))},8006:(e,t,s)=>{"use strict";s.d(t,{n:()=>i});var a=s(5155),r=s(1154);function i(){return(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center flex-col gap-4 bg-background",children:[(0,a.jsx)(r.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}},8181:(e,t,s)=>{"use strict";s.d(t,{Eg:()=>r,W9:()=>n,jk:()=>m,tD:()=>d,vv:()=>i,wj:()=>o});var a=s(3464);let r=[{id:"starter",name:"Starter Package",credits:1e3,price:1e3},{id:"basic",name:"Basic Package",credits:5e3,price:5e3,popular:!0},{id:"standard",name:"Standard Package",credits:1e4,price:1e4}],i=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),n=e=>Math.floor(e/1e3),c=()=>localStorage.getItem("accessToken"),l=()=>{let e=c();return{Authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}},d=async()=>{try{let e=await a.A.get("".concat("http://localhost:8000","/api/authenticator/credits"),{headers:l()});if(e.data.success)return e.data.credits;throw Error(e.data.message||"Failed to fetch credits")}catch(t){if(console.error("Error fetching credits:",t),a.A.isAxiosError(t)){if(t.response){var e;throw Error((null===(e=t.response.data)||void 0===e?void 0:e.message)||"Server error: ".concat(t.response.status))}if(t.request)throw Error("Network error. Please check your connection.")}throw t}},o=async e=>{try{return(await a.A.put("".concat("http://localhost:8000","/api/authenticator/deduct-credits"),{amount:e},{headers:l(),withCredentials:!0})).data.success}catch(e){return console.error("Error deducting credits:",e),!1}},h=async(e,t)=>{try{let s=await a.A.post("".concat("http://localhost:8000","/api/authenticator/top-up"),{user_id:e,package:t.name,credits:t.credits},{headers:l()});if(s.data.success&&s.data.invoice_url)return s.data.invoice_url;throw Error(s.data.message||"Failed to create invoice")}catch(e){if(console.error("Error creating invoice:",e),a.A.isAxiosError(e)){if(e.response){var s;throw Error((null===(s=e.response.data)||void 0===s?void 0:s.message)||"Server error: ".concat(e.response.status))}if(e.request)throw Error("Network error. Please check your connection.")}throw e}};class m{static getInstance(){return m.instance||(m.instance=new m),m.instance}async loadCredits(){try{return this.credits=await d(),this.notifyListeners(),this.credits}catch(e){throw e}}getCurrentCredits(){return this.credits}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.credits))}async topUp(e,t){return await h(e,t)}async refreshCredits(){return await this.loadCredits()}constructor(){this.credits=0,this.listeners=[]}}},8524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>c,BF:()=>l,Hj:()=>d,XI:()=>n,nA:()=>h,nd:()=>o});var a=s(5155),r=s(2115),i=s(3999);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",s),...r})})});n.displayName="Table";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",s),...r})});c.displayName="TableHeader";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...r})});l.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});d.displayName="TableRow";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});o.displayName="TableHead";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});h.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},9037:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[803,374,356,208,256,15,301,441,684,358],()=>t(6533)),_N_E=e.O()}]);