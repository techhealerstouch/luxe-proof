"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2695],{10072:(e,s,a)=>{a.d(s,{A:()=>n});var t=a(95155),r=a(66766);let l={src:"/_next/static/media/logo.280af7fc.svg",height:219,width:1070,blurWidth:0,blurHeight:0};function n(e){let{width:s=120,height:a=60,className:n}=e;return(0,t.jsx)(r.default,{src:l,alt:"Company Logo",width:s,height:a,className:n,priority:!0})}},34964:(e,s,a)=>{a.d(s,{Xi:()=>o,av:()=>d,j7:()=>c,tU:()=>i});var t=a(95155),r=a(12115),l=a(60704),n=a(53999);let i=l.bL,c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});c.displayName=l.B8.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});o.displayName=l.l9.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});d.displayName=l.UC.displayName},49026:(e,s,a)=>{a.d(s,{Fc:()=>c,TN:()=>d,XL:()=>o});var t=a(95155),r=a(12115),l=a(74466),n=a(53999);let i=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef((e,s)=>{let{className:a,variant:r,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:r}),a),...l})});c.displayName="Alert";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});o.displayName="AlertTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},53999:(e,s,a)=>{a.d(s,{cn:()=>l});var t=a(52596),r=a(39688);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}},67133:(e,s,a)=>{a.d(s,{SQ:()=>u,_2:()=>x,hO:()=>h,lp:()=>p,mB:()=>f,rI:()=>d,ty:()=>m});var t=a(95155),r=a(12115),l=a(48698),n=a(13052),i=a(5196),c=a(9428),o=a(53999);let d=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,s)=>{let{className:a,inset:r,children:i,...c}=e;return(0,t.jsxs)(l.ZP,{ref:s,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...c,children:[i,(0,t.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.G5,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=l.G5.displayName;let u=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsx)(l.UC,{ref:s,sideOffset:r,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});u.displayName=l.UC.displayName;let x=r.forwardRef((e,s)=>{let{className:a,inset:r,...n}=e;return(0,t.jsx)(l.q7,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});x.displayName=l.q7.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,checked:n,...c}=e;return(0,t.jsxs)(l.H_,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...c,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),r]})});h.displayName=l.H_.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.hN,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let p=r.forwardRef((e,s)=>{let{className:a,inset:r,...n}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});p.displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});f.displayName=l.wv.displayName},82695:(e,s,a)=>{a.d(s,{A:()=>ex});var t=a(95155),r=a(12115),l=a(94861),n=a(97168),i=a(67133),c=a(85977),o=a(53999);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(c.bL,{ref:s,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});d.displayName=c.bL.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(c._V,{ref:s,className:(0,o.cn)("aspect-square h-full w-full",a),...r})}).displayName=c._V.displayName;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(c.H4,{ref:s,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});m.displayName=c.H4.displayName;var u=a(15452),x=a(74466),h=a(54416);let p=u.bL;u.l9,u.bm;let f=u.ZL,g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(u.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s})});g.displayName=u.hJ.displayName;let j=(0,x.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),N=r.forwardRef((e,s)=>{let{side:a="right",className:r,children:l,...n}=e;return(0,t.jsxs)(f,{children:[(0,t.jsx)(g,{}),(0,t.jsxs)(u.UC,{ref:s,className:(0,o.cn)(j({side:a}),r),...n,children:[l,(0,t.jsxs)(u.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});N.displayName=u.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(u.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold text-foreground",a),...r})}).displayName=u.hE.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(u.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})}).displayName=u.VY.displayName;var b=a(72713),v=a(36347),y=a(15968),w=a(47863),C=a(86422),A=a(381),S=a(53329),k=a(34835),E=a(6874),_=a.n(E),F=a(35695),I=a(74783),R=a(94788),P=a(28883),T=a(66474),O=a(85339),z=a(53904),L=a(93550),U=a(88145),J=a(23464);let B=()=>{let[e,s]=(0,r.useState)(0),[a,t]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),i=(0,r.useCallback)(async()=>{try{t(!0),n(null);let e=localStorage.getItem("accessToken");if(!e)throw Error("No access token found");let a=await J.A.get("".concat("https://stg.luxevipsuite.com","/api/authenticator/credits"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(a.data.success)s(a.data.credits);else throw Error(a.data.message||"Failed to fetch credits")}catch(e){n(e instanceof Error?e.message:"Failed to load credits"),console.error("Error fetching credits:",e)}finally{t(!1)}},[]),c=(0,r.useCallback)(e=>{s(e)},[]);return(0,r.useEffect)(()=>{i()},[i]),{credits:e,loading:a,error:l,refetch:i,updateCredits:c}},G=e=>{let{size:s="md",variant:a,showRefresh:r=!1,className:l=""}=e,{credits:i,loading:c,error:o,refetch:d}=B(),m={sm:{badge:"text-xs px-2 py-1",icon:"h-3 w-3",button:"px-2 py-1"},md:{badge:"text-sm px-2.5 py-1.5",icon:"h-4 w-4",button:"px-3 py-1.5"},lg:{badge:"text-base px-3 py-2",icon:"h-5 w-5",button:"px-4 py-2"}}[s];return c?(0,t.jsx)("div",{className:"flex items-center gap-2 ".concat(l),children:(0,t.jsxs)(U.E,{variant:"outline",className:"flex items-center gap-1 ".concat(m.badge),children:[(0,t.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Loading..."]})}):o?(0,t.jsxs)("div",{className:"flex items-center gap-2 ".concat(l),children:[(0,t.jsxs)(U.E,{variant:"destructive",className:"flex items-center gap-1 ".concat(m.badge),children:[(0,t.jsx)(O.A,{className:m.icon}),"Error"]}),r&&(0,t.jsx)(n.$,{variant:"outline",size:"sm",className:m.button,onClick:d,title:"Retry loading credits",children:(0,t.jsx)(z.A,{className:m.icon})})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 ".concat(l),children:[(0,t.jsxs)(U.E,{variant:a||(o||i<1e3?"destructive":i<5e3?"secondary":"default"),className:"flex items-center gap-1 ".concat(m.badge),children:[(0,t.jsx)(L.A,{className:m.icon}),i.toLocaleString()," credits"]}),r&&(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:m.button,onClick:d,title:"Refresh credits",children:(0,t.jsx)(z.A,{className:m.icon})})]})};var D=a(81586),H=a(84616),$=a(40646),K=a(4516),V=a(29799),X=a(35169),Y=a(37108),M=a(44940),Z=a(33786),q=a(99840),Q=a(49026),W=a(89852),ee=a(82714),es=a(34964);let ea=e=>{let s=parseFloat(e.price),a=e.quantity,t="Basic Package"===e.name;return{id:e.id.toString(),name:e.name,credits:1e3*a,price:s,popular:t,freeAuthentications:0,nfcCards:a}},et=async()=>{let e=localStorage.getItem("accessToken");try{let s=await J.A.get("".concat("https://stg.luxevipsuite.com","/api/credits"),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)}});if(s.data.success&&Array.isArray(s.data.data))return s.data.data.filter(e=>"Custom Package"!==e.name).map(ea);throw Error("Invalid response format")}catch(e){throw console.error("Failed to fetch packages:",e),e}},er=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),el=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(e/1e3)+s},en=e=>{let{package:s,isSelected:a,onSelect:r}=e,l=el(s.credits,s.freeAuthentications||0),n=s.nfcCards||l,i=s.credits-s.price,c=i>0;return(0,t.jsxs)("div",{className:"relative flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-all duration-200 ".concat(a?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:shadow-sm"," ").concat(s.popular&&!a?"border-blue-200":""),onClick:()=>r(s.id),children:[s.popular&&(0,t.jsx)(U.E,{className:"absolute -top-2 right-2 text-xs bg-blue-500",children:"Popular"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900",children:s.name}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("p",{className:"text-xs font-medium",children:[(0,t.jsxs)("span",{className:"text-blue-600",children:[l," authentication",1!==l?"s":""]}),c&&"2"===s.id&&(0,t.jsx)("span",{className:"ml-1 text-green-600",children:"(6 + 1 free)"}),c&&"3"===s.id&&(0,t.jsx)("span",{className:"ml-1 text-green-600",children:"(12 + 3 free)"})]}),(0,t.jsxs)("p",{className:"text-xs text-purple-600 font-medium flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),n," NFC Card",1!==n?"s":""," included"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold text-lg",children:er(s.price)}),c&&(0,t.jsxs)("div",{className:"text-xs text-green-600 font-medium",children:["Save ",er(i),"!"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["₱",(s.price/s.credits).toFixed(2),"/credit"]})]})]})},ei=e=>{let{buttonText:s="Top Up",buttonVariant:a="outline",buttonSize:i="sm",className:c=""}=e,{user:o}=(0,l.A)(),{refetch:d}=B(),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)("selection"),[p,f]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[N,b]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),[A,S]=(0,r.useState)(""),[k,E]=(0,r.useState)("packages"),[_,F]=(0,r.useState)([]),[I,R]=(0,r.useState)(!1),[P,T]=(0,r.useState)(null),[z,U]=(0,r.useState)({fullName:"",email:(null==o?void 0:o.email)||"",phoneNumber:"",streetAddress:"",barangay:"",city:"",province:"",postalCode:"",country:"Philippines"});(0,r.useEffect)(()=>{m&&0===_.length&&(R(!0),T(null),et().then(e=>{F(e)}).catch(e=>{T("Failed to load packages. Please try again."),console.error("Error fetching packages:",e)}).finally(()=>{R(!1)}))},[m]),(0,r.useEffect)(()=>{(null==o?void 0:o.email)&&m&&U(e=>({...e,email:o.email,fullName:e.fullName||o.name||""}))},[o,m]);let J=_.find(e=>e.id===p),G=A?parseInt(A):0,ea=G>0?(e=>{let s=0,a=0;e>=6&&e<12?s=1e3*(a=Math.floor(e/6)):e>=12&&e<20?s=1e3*(a=3*Math.floor(e/12)):e>=20&&(s=1e3*(a=5*Math.floor(e/20)));let t=1e3*e,r=t+s,l=e+a;return{baseCredits:t,bonusCredits:s,totalCredits:r,price:1e3*e,bonusAuth:a,totalAuth:l,nfcCards:l,savings:s}})(G):null,ei="custom"===k&&ea&&G>0?{id:"custom",name:"Custom Package",credits:ea.totalCredits,price:ea.price,freeAuthentications:ea.bonusAuth,nfcCards:ea.nfcCards}:null,ec="custom"===k?ei:J,eo=(null==ec?void 0:ec.nfcCards)||(ec?el(ec.credits,ec.freeAuthentications||0):0),ed=ec?ec.price+150:0,em=()=>{for(let s of["fullName","email","phoneNumber","streetAddress","barangay","city","province"]){var e;if(!(null===(e=z[s])||void 0===e?void 0:e.trim()))return b("Please fill in all required fields"),!1}return!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z.email)||(b("Please enter a valid email address"),!1)},eu=async()=>{if(!(null==o?void 0:o.id)){b("User not authenticated");return}if(em()){j(!0),b(null);try{let e={user_id:o.id,shipping:{full_name:z.fullName,email:z.email,phone:z.phoneNumber,street:z.streetAddress,barangay:z.barangay,city:z.city,province:z.province,postal_code:z.postalCode,country:z.country}};"packages"===k&&J?e.credit_id=J.id:"custom"===k&&(e.custom_authentications=parseInt(A));let s=await fetch("".concat("https://stg.luxevipsuite.com","/api/authenticator/top-up"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:JSON.stringify(e)}),a=await s.json();a.success&&a.invoice_url?(y(a.invoice_url),h("success"),setTimeout(()=>{ex()},2e3)):b(a.message||"Payment processing failed")}catch(e){b(e instanceof Error?e.message:"Payment processing failed")}finally{j(!1)}}},ex=()=>{v&&(C(!0),window.open(v,"_blank","noopener,noreferrer"),setTimeout(()=>{C(!1),eh(),d()},1e3))},eh=()=>{g||w||(u(!1),h("selection"),f(null),b(null),y(null),C(!1),S(""),E("packages"),U({fullName:"",email:(null==o?void 0:o.email)||"",phoneNumber:"",streetAddress:"",barangay:"",city:"",province:"",postalCode:"",country:"Philippines"}))},ep=(e,s)=>{U(a=>({...a,[e]:s})),b(null)};return(0,t.jsxs)("div",{className:c,children:[(0,t.jsxs)(n.$,{variant:a,onClick:()=>u(!0),className:"flex items-center gap-2",children:[(0,t.jsx)(H.A,{className:"h-4 w-4"}),s]}),(0,t.jsx)(q.lG,{open:m,onOpenChange:u,children:(0,t.jsxs)(q.Cf,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(q.c7,{children:(0,t.jsxs)(q.L3,{className:"flex items-center gap-2",children:["success"===x?(0,t.jsx)($.A,{className:"h-5 w-5 text-green-600"}):"shipping"===x?(0,t.jsx)(K.A,{className:"h-5 w-5 text-blue-600"}):(0,t.jsx)(D.A,{className:"h-5 w-5"}),"success"===x?"Invoice Created!":"shipping"===x?"Shipping Details":"Top Up Credits"]})}),"success"===x&&v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Q.Fc,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)($.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)(Q.TN,{className:"text-green-800",children:["Invoice created successfully!"," ",w?"Redirecting to payment...":"Click below to proceed."]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-3 bg-gray-50",children:[(0,t.jsxs)("h4",{className:"font-semibold text-sm flex items-center gap-2",children:[(0,t.jsx)($.A,{className:"h-4 w-4 text-green-600"}),"Purchase Details"]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Package:"}),(0,t.jsx)("span",{className:"font-medium",children:"custom"===k?"Custom - ".concat(G," Auth"):null==ec?void 0:ec.name})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Authentications:"}),(0,t.jsx)("span",{className:"font-medium text-blue-600",children:ec?el(ec.credits,ec.freeAuthentications||0):0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),"NFC Cards:"]}),(0,t.jsxs)("span",{className:"font-medium text-purple-600",children:[eo," card",1!==eo?"s":""]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{className:"text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(V.A,{className:"h-3 w-3"}),"Shipping:"]}),(0,t.jsx)("span",{className:"font-medium",children:er(150)})]}),(0,t.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total Amount:"}),(0,t.jsx)("span",{className:"font-semibold text-blue-600 text-lg",children:er(ed)})]})]})]})]}),"shipping"===x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.$,{variant:"ghost",onClick:()=>h("selection"),className:"w-fit",size:"sm",children:[(0,t.jsx)(X.A,{className:"h-4 w-4 mr-2"}),"Back to Package Selection"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Contact Information"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"fullName",children:["Full Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"fullName",placeholder:"Enter your full name",value:z.fullName,onChange:e=>ep("fullName",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"email",children:["Email ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"email",type:"email",placeholder:"you@example.com",value:z.email,onChange:e=>ep("email",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"phoneNumber",children:["Phone Number ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"phoneNumber",placeholder:"09XXXXXXXXX",value:z.phoneNumber,onChange:e=>ep("phoneNumber",e.target.value)})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Address Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"streetAddress",children:["Street Address ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"streetAddress",placeholder:"House No., Street Name",value:z.streetAddress,onChange:e=>ep("streetAddress",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"barangay",children:["Barangay ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"barangay",value:z.barangay,onChange:e=>ep("barangay",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"city",children:["City ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"city",value:z.city,onChange:e=>ep("city",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(ee.J,{htmlFor:"province",children:["Province ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.p,{id:"province",value:z.province,onChange:e=>ep("province",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ee.J,{htmlFor:"postalCode",children:"Postal Code"}),(0,t.jsx)(W.p,{id:"postalCode",value:z.postalCode,onChange:e=>ep("postalCode",e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ee.J,{htmlFor:"country",children:"Country"}),(0,t.jsx)(W.p,{id:"country",value:z.country,disabled:!0,className:"bg-gray-50"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Order Summary"}),(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 space-y-4 sticky top-4",children:[(0,t.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"custom"===k?"Custom - ".concat(G," Auth"):null==ec?void 0:ec.name}),(0,t.jsx)("span",{children:er((null==ec?void 0:ec.price)||0)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-purple-600 text-xs",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),eo," NFC Card",1!==eo?"s":""," included"]}),(0,t.jsx)("span",{className:"font-medium",children:"Free"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(V.A,{className:"h-3 w-3"}),"Shipping Fee"]}),(0,t.jsx)("span",{children:er(150)})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold text-base border-t pt-2",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{className:"text-blue-600",children:er(ed)})]})]}),(0,t.jsx)(n.$,{onClick:eu,disabled:g,className:"w-full",size:"lg",children:g?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Processing..."]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4"}),"Place Order"]})}),N&&(0,t.jsxs)(Q.Fc,{variant:"destructive",children:[(0,t.jsx)(O.A,{className:"h-4 w-4"}),(0,t.jsx)(Q.TN,{children:N})]})]})]})]})]}),"selection"===x&&(0,t.jsxs)(t.Fragment,{children:[(N||P)&&(0,t.jsxs)(Q.Fc,{variant:"destructive",children:[(0,t.jsx)(O.A,{className:"h-4 w-4"}),(0,t.jsx)(Q.TN,{children:N||P})]}),(0,t.jsxs)(es.tU,{value:k,onValueChange:E,className:"w-full",children:[(0,t.jsxs)(es.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(es.Xi,{value:"packages",className:"flex items-center gap-2",children:[(0,t.jsx)(Y.A,{className:"h-4 w-4"}),"Packages"]}),(0,t.jsxs)(es.Xi,{value:"custom",className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-4 w-4"}),"Custom"]})]}),(0,t.jsxs)(es.av,{value:"packages",className:"space-y-4",children:[I?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})}):P?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(O.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{children:"Failed to load packages"}),(0,t.jsx)(n.$,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>{T(null),R(!0),et().then(F).catch(()=>T("Failed to load packages")).finally(()=>R(!1))},children:"Retry"})]}):0===_.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(Y.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{children:"No packages available"})]}):(0,t.jsx)("div",{className:"grid gap-3 mt-4",children:_.map(e=>(0,t.jsx)(en,{package:e,isSelected:p===e.id,onSelect:e=>{f(e),b(null)}},e.id))}),J&&(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:J.name}),(0,t.jsx)("span",{children:er(J.price)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-purple-600 text-xs",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),eo," NFC Card",1!==eo?"s":""," included"]}),(0,t.jsx)("span",{className:"font-medium",children:"Free"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(V.A,{className:"h-3 w-3"}),"Shipping Fee"]}),(0,t.jsx)("span",{children:er(150)})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold text-base border-t pt-2",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{className:"text-blue-600",children:er(ed)})]})]})]})]}),(0,t.jsx)(es.av,{value:"custom",className:"space-y-4",children:(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-2",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 text-blue-600"}),"Create Your Custom Package"]}),(0,t.jsx)("p",{className:"text-smtext-gray-600",children:"Design your perfect package! Choose exactly how many authentications you need."}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"Bonus Credits Available:"}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["• 6-11 auth: Get 1 FREE per 6 purchased",(0,t.jsx)("br",{}),"• 12-19 auth: Get 3 FREE per 12 purchased",(0,t.jsx)("br",{}),"• 20+ auth: Get 5 FREE per 20 purchased"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ee.J,{htmlFor:"customAuth",className:"text-sm font-medium",children:"Number of Authentications Needed"}),(0,t.jsx)(W.p,{id:"customAuth",type:"number",min:"1",max:"99",placeholder:"How many do you need? (1-99)",value:A,onChange:e=>{let s=e.target.value;(""===s||parseInt(s)>=1&&99>=parseInt(s))&&S(s)},className:"mt-1"}),A&&parseInt(A)>99&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Maximum 99 authentications allowed"}),ea&&G>0&&G<=99&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm space-y-3",children:[(0,t.jsxs)("div",{className:"text-center pb-2 border-b",children:[(0,t.jsx)("h5",{className:"font-semibold text-gray-900",children:"Your Custom Package"}),ea.bonusAuth>0&&(0,t.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:["Includes ",ea.bonusAuth," ","FREE authentication",ea.bonusAuth>1?"s":"","!"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(L.A,{className:"h-3 w-3"}),"Total Credits:"]}),(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[(ea.totalCredits/100).toLocaleString()," ","credits",ea.bonusCredits>0&&(0,t.jsxs)("span",{className:"text-xs text-green-600 ml-1",children:["(",(ea.baseCredits/100).toLocaleString()," ","+"," ",(ea.bonusCredits/100).toLocaleString()," ","free)"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Authentications:"}),(0,t.jsxs)("span",{className:"font-semibold text-blue-600",children:[ea.totalAuth," ","authentication",1!==ea.totalAuth?"s":"",ea.bonusAuth>0&&(0,t.jsxs)("span",{className:"text-xs text-green-600 ml-1",children:["(",G," +"," ",ea.bonusAuth," free)"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),"NFC Cards Included:"]}),(0,t.jsxs)("span",{className:"font-semibold text-purple-600",children:[ea.nfcCards," card",1!==ea.nfcCards?"s":""," ","FREE"]})]}),(0,t.jsxs)("div",{className:"border-t pt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Package Price:"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"font-bold text-lg text-gray-900",children:er(ea.price)}),ea.savings>0&&(0,t.jsxs)("div",{className:"text-xs text-green-600 font-medium",children:["Save"," ",er(ea.savings),"!"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,t.jsx)("span",{children:"Effective price per auth:"}),(0,t.jsxs)("span",{children:["₱",(ea.price/ea.totalAuth).toFixed(2)]})]})]})]})]})})]}),ei&&ea&&(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-1.5 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsxs)("span",{children:[G," Authentication",1!==G?"s":"",ea.bonusAuth>0&&(0,t.jsxs)("span",{className:"text-green-600 text-xs ml-1",children:["(+",ea.bonusAuth," FREE)"]})]}),(0,t.jsx)("span",{children:er(ei.price)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-purple-600 text-xs",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(D.A,{className:"h-3 w-3"}),ea.nfcCards," NFC Card",1!==ea.nfcCards?"s":""," ","included"]}),(0,t.jsx)("span",{className:"font-medium",children:"Free"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(V.A,{className:"h-3 w-3"}),"Shipping Fee"]}),(0,t.jsx)("span",{children:er(150)})]}),ea.savings>0&&(0,t.jsxs)("div",{className:"flex justify-between text-green-600 text-xs font-medium",children:[(0,t.jsx)("span",{children:"Total Savings:"}),(0,t.jsx)("span",{children:er(ea.savings)})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold text-base border-t pt-2",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{className:"text-blue-600",children:er(ed)})]})]})]})]})})]})]}),(0,t.jsx)(q.Es,{children:"success"===x&&v?(0,t.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,t.jsx)(n.$,{variant:"outline",onClick:eh,disabled:w,className:"flex-1",children:"Close"}),(0,t.jsx)(n.$,{onClick:ex,disabled:w,className:"flex-1",children:w?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Redirecting..."]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z.A,{className:"h-4 w-4"}),"Proceed to Payment"]})})]}):"shipping"===x?(0,t.jsx)(n.$,{variant:"outline",onClick:eh,disabled:g,children:"Cancel"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{variant:"outline",onClick:eh,disabled:g,children:"Cancel"}),(0,t.jsx)(n.$,{disabled:!ec,onClick:()=>{if("packages"===k&&!p){b("Please select a package");return}if("custom"===k&&(!A||1>parseInt(A))){b("Please enter a valid authentication number (minimum 1)");return}b(null),h("shipping")},children:"Proceed to Shipping"})]})})]})})]})},ec=e=>{let{showTopUp:s=!0,showRefresh:a=!1,size:r="md",variant:l,topUpButtonText:n="Top Up",topUpButtonVariant:i="outline",className:c="",packages:o}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-2 ".concat(c),children:[(0,t.jsx)(G,{size:r,variant:l,showRefresh:a}),s&&(0,t.jsx)(ei,{buttonText:n,buttonVariant:i,buttonSize:r})]})};function eo(e){var s;let{sidebarOpen:a,toggleSidebar:r,className:c}=e,{user:u,logout:x}=(0,l.A)(),p=(0,F.useRouter)();return(0,t.jsxs)("header",{className:(0,o.cn)("flex h-16 items-center justify-between gap-4 border-b bg-background px-4 shrink-0",c),children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8",children:a?(0,t.jsx)(h.A,{className:"h-4 w-4"}):(0,t.jsx)(I.A,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(ec,{size:"sm",showRefresh:!0,topUpButtonText:"Add Credits"}),(0,t.jsxs)(i.rI,{children:[(0,t.jsx)(i.ty,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"ghost",className:"flex items-center gap-2 px-3 py-2 h-auto","aria-label":"Help Center",children:[(0,t.jsx)(R.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Help"})]})}),(0,t.jsxs)(i.SQ,{align:"end",className:"w-56",children:[(0,t.jsx)(i.lp,{children:"Help & Support"}),(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/contact",children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"Contact Support"]})})]})]}),(0,t.jsxs)(i.rI,{children:[(0,t.jsx)(i.ty,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"ghost",className:"flex items-center gap-2 px-3 py-2 h-auto",children:[(0,t.jsx)(d,{className:"h-7 w-7",children:(0,t.jsx)(m,{className:"text-xs",children:(null==u?void 0:null===(s=u.name)||void 0===s?void 0:s.charAt(0))||"U"})}),(0,t.jsx)("span",{className:"text-sm font-medium hidden sm:block",children:null==u?void 0:u.name}),(0,t.jsx)(T.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(i.SQ,{align:"end",className:"w-56",children:[(0,t.jsxs)("div",{className:"px-2 py-1.5 text-sm",children:[(0,t.jsx)("div",{className:"font-medium",children:null==u?void 0:u.name}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:null==u?void 0:u.email})]}),(0,t.jsx)(i.mB,{}),(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/profile",children:[(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/settings",children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Settings"]})}),(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/billing",children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Billing"]})}),(0,t.jsx)(i.mB,{}),(0,t.jsxs)(i._2,{onClick:()=>{x(),p.push("/login")},className:"text-red-600",children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})]})]})}var ed=a(10072);let em=[{title:"Dashboard",url:"/dashboard",icon:b.A},{title:"Create Authentication",url:"/authentications/intro",icon:v.A},{title:"Authentication List",url:"/authentications",icon:y.A}];function eu(e){var s;let{isOpen:a,onLinkClick:r}=e,{user:c,logout:u}=(0,l.A)(),x=(0,F.usePathname)(),h=(0,F.useRouter)(),p=()=>{null==r||r()};return(0,t.jsxs)("div",{className:"bg-sidebar border-r border-sidebar-border flex flex-col h-full",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 px-4 py-4 border-b border-sidebar-border",children:a?(0,t.jsx)("span",{className:"font-semibold",children:(0,t.jsx)(ed.A,{width:300,height:20,className:"mx-auto"})}):(0,t.jsx)("div",{className:"mx-auto",children:(0,t.jsx)(ed.A,{width:32,height:32,className:"mx-auto"})})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("div",{className:"p-2",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"px-2 py-2",children:a&&(0,t.jsx)("h2",{className:"text-xs font-semibold text-sidebar-foreground/70 uppercase tracking-wide",children:"Navigation"})}),em.map(e=>(0,t.jsxs)(_(),{href:e.url,onClick:p,className:(0,o.cn)("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors","hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",x===e.url?"text-sidebar-accent-foreground":"text-sidebar-foreground"),children:[(0,t.jsx)(e.icon,{className:"h-4 w-4 shrink-0"}),a&&(0,t.jsx)("span",{className:"truncate",children:e.title})]},e.title))]})})}),(0,t.jsx)("div",{className:"border-t border-sidebar-border p-2",children:(0,t.jsxs)(i.rI,{children:[(0,t.jsx)(i.ty,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"ghost",className:(0,o.cn)("w-full justify-start gap-3 px-3 py-2 h-auto",!a&&"justify-center px-2"),children:[(0,t.jsx)(d,{className:"h-6 w-6",children:(0,t.jsx)(m,{className:"text-xs",children:(null==c?void 0:null===(s=c.name)||void 0===s?void 0:s.charAt(0))||"U"})}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"truncate text-sm",children:null==c?void 0:c.name}),(0,t.jsx)(w.A,{className:"ml-auto h-4 w-4"})]})]})}),(0,t.jsxs)(i.SQ,{side:"top",align:"start",className:"w-56",children:[(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/profile",onClick:p,children:[(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/settings",onClick:p,children:[(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Settings"]})}),(0,t.jsx)(i._2,{asChild:!0,children:(0,t.jsxs)(_(),{href:"/billing",onClick:p,children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Billing"]})}),(0,t.jsxs)(i._2,{onClick:()=>{u(),h.push("/login"),null==r||r()},children:[(0,t.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})})]})}function ex(e){let{children:s}=e,[a,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{i(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[!n&&(0,t.jsx)("div",{className:(0,o.cn)("transition-all duration-300 ease-in-out",a?"w-64":"w-16"),children:(0,t.jsx)(eu,{isOpen:a})}),n&&(0,t.jsx)(p,{open:c,onOpenChange:d,children:(0,t.jsx)(N,{side:"left",className:"p-0 w-64",children:(0,t.jsx)(eu,{isOpen:!0,onLinkClick:()=>{d(!1)}})})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,t.jsx)(eo,{sidebarOpen:n?c:a,toggleSidebar:()=>{n?d(!c):l(!a)}}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-6",children:(0,t.jsx)("div",{className:"space-y-6",children:s})})]})]})}},82714:(e,s,a)=>{a.d(s,{J:()=>o});var t=a(95155),r=a(12115),l=a(40968),n=a(74466),i=a(53999);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,i.cn)(c(),a),...r})});o.displayName=l.b.displayName},88145:(e,s,a)=>{a.d(s,{E:()=>i});var t=a(95155);a(12115);var r=a(74466),l=a(53999);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:a}),s),...r})}},89852:(e,s,a)=>{a.d(s,{p:()=>n});var t=a(95155),r=a(12115),l=a(53999);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},94861:(e,s,a)=>{a.d(s,{A:()=>u,AuthProvider:()=>m});var t=a(95155),r=a(12115),l=a(35695),n=a(23464),i=a(56671);let c={ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",USER:"user",LOGGED_IN:"loggedIn",JUST_LOGGED_IN:"justLoggedIn",AUTH_TOKEN:"auth_token",PKCE_VERIFIER:"pkce_code_verifier"},o={LOGIN:"/login",DASHBOARD:"/dashboard"},d=(0,r.createContext)(null);function m(e){let{children:s}=e,[a,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!0),h=(0,l.useRouter)(),p="https://stg.luxevipsuite.com",f=(0,r.useCallback)(()=>{Object.values(c).forEach(e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)})},[]),g=(0,r.useCallback)(e=>{sessionStorage.setItem(c.USER,JSON.stringify(e)),sessionStorage.setItem(c.LOGGED_IN,"true"),m(e)},[]),j=(0,r.useCallback)(()=>{try{let e=sessionStorage.getItem(c.USER);if(!e)return null;let s=JSON.parse(e);return s.data||s}catch(e){return console.error("Failed to parse stored user:",e),sessionStorage.removeItem(c.USER),null}},[]),N=(0,r.useCallback)(async e=>{let s=localStorage.getItem(c.PKCE_VERIFIER);if(!s)throw Error("PKCE code verifier missing. Please start the login process again.");let a=new URLSearchParams({grant_type:"authorization_code",client_id:"01998003-aa09-70b2-a106-1fd34098f380",redirect_uri:"".concat("https://stgapp.luxeproof.com","/auth/callback"),code:e,code_verifier:s});try{let e=await fetch("".concat(p,"/oauth/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:a.toString()}),s=await e.json();if(!e.ok)throw console.error("OAuth token error response:",s),Error(s.error_description||"Failed to exchange authorization code");return localStorage.removeItem(c.PKCE_VERIFIER),s}catch(e){throw console.error("Token exchange failed:",e),e}},[p]),b=(0,r.useCallback)(async()=>{try{let e=await fetch("".concat(p,"/api/refresh-token"),{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to refresh token");return(await e.json()).access_token}catch(e){throw console.error("Token refresh failed:",e),window.location.href=o.LOGIN,e}},[p]),v=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=localStorage.getItem(c.ACCESS_TOKEN);if(!s)throw Error("No access token available");try{let a=await fetch("".concat(p,"/api/user"),{method:"GET",headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"}});if(!a.ok){if(401===a.status){let s=await b();return localStorage.setItem(c.ACCESS_TOKEN,s),v(e)}throw Error("Failed to fetch user data")}let t=await a.json(),r=t.data||t;return g(r),sessionStorage.getItem(c.JUST_LOGGED_IN)&&(i.o.success("Logged in successfully!"),sessionStorage.removeItem(c.JUST_LOGGED_IN)),e&&h.push(o.DASHBOARD),r}catch(e){throw console.error("Error fetching user data:",e),e}},[p,b,h,g]),y=(0,r.useCallback)(async e=>{let s=localStorage.getItem(c.ACCESS_TOKEN);if(!s)throw Error("No auth token found");console.log(e);let a={name:e.name,email:e.email,phone_number:e.phone_number,timezone:e.timezone,account:{name:e.businessName,slug:e.businessSlug}};try{let e=await n.A.put("".concat(p,"/api/user"),a,{headers:{Authorization:"Bearer ".concat(s),Accept:"application/json","Content-Type":"application/json"}}),t=e.data.data||e.data;return g(t),i.o.success("Watch data submitted successfully"),t}catch(e){throw i.o.error("Profile Update Failed!"),e}},[p,g]),w=(0,r.useCallback)(()=>{let e=localStorage.getItem(c.ACCESS_TOKEN),s=sessionStorage.getItem(c.USER);return!!(e&&s)},[]),C=(0,r.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem(c.ACCESS_TOKEN);if(!a)throw Error("No access token available");let t=async a=>fetch(e,{...s,headers:{...s.headers,Authorization:"Bearer ".concat(a),Accept:"application/json","Content-Type":"application/json"}}),r=await t(a);if(401===r.status)try{let e=await b();return localStorage.setItem(c.ACCESS_TOKEN,e),t(e)}catch(e){throw await S(),e}return r},[b]),A=(0,r.useCallback)(async(e,s,a)=>{console.log(e);let t=localStorage.getItem(c.ACCESS_TOKEN);try{let r=await C("".concat(p,"/api/user/change-password"),{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},method:"PUT",credentials:"include",body:JSON.stringify({currentPassword:e,newPassword:s,newPassword_confirmation:a})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to change password")}i.o.success("Password changed successfully!")}catch(e){throw i.o.error(e.message||"Password change failed"),e}},[C,p]),S=(0,r.useCallback)(async()=>{try{let e=localStorage.getItem(c.ACCESS_TOKEN);e&&await fetch("".concat(p,"/api/logout"),{method:"POST",credentials:"include",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}})}catch(e){console.error("Logout API call failed:",e)}finally{f(),m(null),window.location.href=o.LOGIN}},[p,f]);return((0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(c.ACCESS_TOKEN);if(sessionStorage.getItem(c.JUST_LOGGED_IN)&&e){await v(!0);return}let s=j();if(s){m(s),window.location.pathname===o.LOGIN&&h.push(o.DASHBOARD);return}if(e)try{await v(!0)}catch(e){console.error("Failed to restore session:",e),localStorage.removeItem(c.ACCESS_TOKEN)}}catch(e){console.error("Auth initialization error:",e)}finally{x(!1)}})()},[]),u)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):(0,t.jsx)(d.Provider,{value:{user:a,isLoading:u,logout:S,updateUser:y,changePassword:A,exchangeAuthorizationCode:N,refreshAccessToken:b,fetchUserData:v,isAuthenticated:w,authenticatedRequest:C},children:s})}let u=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},97168:(e,s,a)=>{a.d(s,{$:()=>o,r:()=>c});var t=a(95155),r=a(12115),l=a(99708),n=a(74466),i=a(53999);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,size:n,asChild:o=!1,...d}=e,m=o?l.DX:"button";return(0,t.jsx)(m,{className:(0,i.cn)(c({variant:r,size:n,className:a})),ref:s,...d})});o.displayName="Button"},99840:(e,s,a)=>{a.d(s,{Cf:()=>u,Es:()=>h,L3:()=>p,c7:()=>x,lG:()=>c,rr:()=>f,zM:()=>o});var t=a(95155),r=a(12115),l=a(15452),n=a(54416),i=a(53999);let c=l.bL,o=l.l9,d=l.ZL;l.bm;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,s)=>{let{className:a,children:r,...c}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[r,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};x.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=l.hE.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});f.displayName=l.VY.displayName}}]);